<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSCF+: Util::MpiStructBuilder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSCF+
   &#160;<span id="projectnumber">v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceUtil.html">Util</a></li><li class="navelem"><a class="el" href="classUtil_1_1MpiStructBuilder.html">MpiStructBuilder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classUtil_1_1MpiStructBuilder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Util::MpiStructBuilder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A <a class="el" href="classUtil_1_1MpiStructBuilder.html" title="A MpiStructBuilder objects is used to create an MPI Struct datatype.">MpiStructBuilder</a> objects is used to create an MPI Struct datatype.  
 <a href="classUtil_1_1MpiStructBuilder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="MpiStructBuilder_8h_source.html">MpiStructBuilder.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3a65505e0cd724576e4f64a32c23fda9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUtil_1_1MpiStructBuilder.html#a3a65505e0cd724576e4f64a32c23fda9">MpiStructBuilder</a> ()</td></tr>
<tr class="memdesc:a3a65505e0cd724576e4f64a32c23fda9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="classUtil_1_1MpiStructBuilder.html#a3a65505e0cd724576e4f64a32c23fda9">More...</a><br /></td></tr>
<tr class="separator:a3a65505e0cd724576e4f64a32c23fda9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34f85f4a1e1c296ba324fe274ea22f24"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUtil_1_1MpiStructBuilder.html#a34f85f4a1e1c296ba324fe274ea22f24">setBase</a> (void *objectAddress)</td></tr>
<tr class="memdesc:a34f85f4a1e1c296ba324fe274ea22f24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set address of an class instance.  <a href="classUtil_1_1MpiStructBuilder.html#a34f85f4a1e1c296ba324fe274ea22f24">More...</a><br /></td></tr>
<tr class="separator:a34f85f4a1e1c296ba324fe274ea22f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b7815cfc8afac5fb7f225de784b07a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUtil_1_1MpiStructBuilder.html#a0b7815cfc8afac5fb7f225de784b07a1">addMember</a> (void *memberAddress, MPI::Datatype type, int count=1)</td></tr>
<tr class="memdesc:a0b7815cfc8afac5fb7f225de784b07a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a new member variable to the type map.  <a href="classUtil_1_1MpiStructBuilder.html#a0b7815cfc8afac5fb7f225de784b07a1">More...</a><br /></td></tr>
<tr class="separator:a0b7815cfc8afac5fb7f225de784b07a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae95e12f80d3991fe0bd7848010924c25"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classUtil_1_1MpiStructBuilder.html#ae95e12f80d3991fe0bd7848010924c25">commit</a> (MPI::Datatype &amp;newType)</td></tr>
<tr class="memdesc:ae95e12f80d3991fe0bd7848010924c25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build and commit a user-defined MPI Struct datatype.  <a href="classUtil_1_1MpiStructBuilder.html#ae95e12f80d3991fe0bd7848010924c25">More...</a><br /></td></tr>
<tr class="separator:ae95e12f80d3991fe0bd7848010924c25"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="classUtil_1_1MpiStructBuilder.html" title="A MpiStructBuilder objects is used to create an MPI Struct datatype.">MpiStructBuilder</a> objects is used to create an MPI Struct datatype. </p>
<p>This class provides methods to simplify construction of an MPI data type that can stores instances of a C struct or C++ class.</p>
<p>As an example, consider the creation of an MPI datatype MyClassMpi for class MyClass, with a class definition: </p><div class="fragment"><div class="line"><span class="keyword">class </span>MyClass </div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">double</span> x[3];</div>
<div class="line">   <span class="keywordtype">int</span>    i, j;</div>
<div class="line">}</div>
</div><!-- fragment --><p> The code required to build and commit the MPI datatype MyClassMpi is: </p><div class="fragment"><div class="line">MyClass          object;</div>
<div class="line">MPI::Datatype  MyClassMpi;</div>
<div class="line"><a class="code" href="classUtil_1_1MpiStructBuilder.html#a3a65505e0cd724576e4f64a32c23fda9">MpiStructBuilder</a> builder;</div>
<div class="line"> </div>
<div class="line">builder.setBase(&amp;<span class="keywordtype">object</span>)</div>
<div class="line">builder.addMember(&amp;<span class="keywordtype">object</span>.x, MPI::DOUBLE, 3);</div>
<div class="line">builder.addMember(&amp;<span class="keywordtype">object</span>.i, MPI::INT, 1);</div>
<div class="line">builder.addMember(&amp;<span class="keywordtype">object</span>.j, MPI::INT, 1);</div>
<div class="line">builder.commit(&amp;MyClassMpi);</div>
</div><!-- fragment --><p> The setBase and addMember classes require addresses of an instance of the class and of its members, respectively. These addresses must all refer to same instance. The commit method calculates the offset of each member by subtracting the address of the object from the address of each of its members. </p>

<p class="definition">Definition at line <a class="el" href="MpiStructBuilder_8h_source.html#l00054">54</a> of file <a class="el" href="MpiStructBuilder_8h_source.html">MpiStructBuilder.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a3a65505e0cd724576e4f64a32c23fda9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a65505e0cd724576e4f64a32c23fda9">&#9670;&nbsp;</a></span>MpiStructBuilder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Util::MpiStructBuilder::MpiStructBuilder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>

<p class="definition">Definition at line <a class="el" href="MpiStructBuilder_8cpp_source.html#l00010">10</a> of file <a class="el" href="MpiStructBuilder_8cpp_source.html">MpiStructBuilder.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a34f85f4a1e1c296ba324fe274ea22f24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34f85f4a1e1c296ba324fe274ea22f24">&#9670;&nbsp;</a></span>setBase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Util::MpiStructBuilder::setBase </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>objectAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set address of an class instance. </p>

<p class="definition">Definition at line <a class="el" href="MpiStructBuilder_8cpp_source.html#l00018">18</a> of file <a class="el" href="MpiStructBuilder_8cpp_source.html">MpiStructBuilder.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="Pair_8h_source.html#l00069">Util::Pair&lt; DPropagator &gt;::commitMpiType()</a>, <a class="el" href="FArray_8h_source.html#l00292">Util::FArray&lt; DPropagator, 2 &gt;::commitMpiType()</a>, <a class="el" href="Tensor_8cpp_source.html#l00125">Util::Tensor::commitMpiType()</a>, <a class="el" href="Vector_8cpp_source.html#l00097">Util::Vector::commitMpiType()</a>, and <a class="el" href="IntVector_8cpp_source.html#l00092">Util::IntVector::commitMpiType()</a>.</p>

</div>
</div>
<a id="a0b7815cfc8afac5fb7f225de784b07a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b7815cfc8afac5fb7f225de784b07a1">&#9670;&nbsp;</a></span>addMember()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Util::MpiStructBuilder::addMember </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>memberAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MPI::Datatype&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a new member variable to the type map. </p>
<p>This method must be called once for each member. The address parameter must be a pointer to a member variable of the object whose base address is passed to <a class="el" href="classUtil_1_1MpiStructBuilder.html#a34f85f4a1e1c296ba324fe274ea22f24" title="Set address of an class instance.">setBase()</a>.</p>
<p>The count parameter is required only for array members: the default value of count=1 may be used for scalar members.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">memberAddress</td><td>displacement of variable, in bytes. </td></tr>
    <tr><td class="paramname">type</td><td>data type (MPI::INT, MPI::DOUBLE, etc.) </td></tr>
    <tr><td class="paramname">count</td><td>number of contiguous variables (array count) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MpiStructBuilder_8cpp_source.html#l00026">26</a> of file <a class="el" href="MpiStructBuilder_8cpp_source.html">MpiStructBuilder.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="Pair_8h_source.html#l00069">Util::Pair&lt; DPropagator &gt;::commitMpiType()</a>, <a class="el" href="FArray_8h_source.html#l00292">Util::FArray&lt; DPropagator, 2 &gt;::commitMpiType()</a>, <a class="el" href="Tensor_8cpp_source.html#l00125">Util::Tensor::commitMpiType()</a>, <a class="el" href="Vector_8cpp_source.html#l00097">Util::Vector::commitMpiType()</a>, and <a class="el" href="IntVector_8cpp_source.html#l00092">Util::IntVector::commitMpiType()</a>.</p>

</div>
</div>
<a id="ae95e12f80d3991fe0bd7848010924c25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae95e12f80d3991fe0bd7848010924c25">&#9670;&nbsp;</a></span>commit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Util::MpiStructBuilder::commit </td>
          <td>(</td>
          <td class="paramtype">MPI::Datatype &amp;&#160;</td>
          <td class="paramname"><em>newType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build and commit a user-defined MPI Struct datatype. </p>
<p>The <a class="el" href="classUtil_1_1MpiStructBuilder.html#a34f85f4a1e1c296ba324fe274ea22f24" title="Set address of an class instance.">setBase()</a> method must be called once and the <a class="el" href="classUtil_1_1MpiStructBuilder.html#a0b7815cfc8afac5fb7f225de784b07a1" title="Add a new member variable to the type map.">addMember()</a> method must be called once per member before calling this method.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newType</td><td>new MPI datatype (on output). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MpiStructBuilder_8cpp_source.html#l00039">39</a> of file <a class="el" href="MpiStructBuilder_8cpp_source.html">MpiStructBuilder.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="Pair_8h_source.html#l00069">Util::Pair&lt; DPropagator &gt;::commitMpiType()</a>, <a class="el" href="FArray_8h_source.html#l00292">Util::FArray&lt; DPropagator, 2 &gt;::commitMpiType()</a>, <a class="el" href="Tensor_8cpp_source.html#l00125">Util::Tensor::commitMpiType()</a>, <a class="el" href="Vector_8cpp_source.html#l00097">Util::Vector::commitMpiType()</a>, and <a class="el" href="IntVector_8cpp_source.html#l00092">Util::IntVector::commitMpiType()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="MpiStructBuilder_8h_source.html">MpiStructBuilder.h</a></li>
<li><a class="el" href="MpiStructBuilder_8cpp_source.html">MpiStructBuilder.cpp</a></li>
</ul>
</div><!-- contents -->
<div class="ttc" id="aclassUtil_1_1MpiStructBuilder_html_a3a65505e0cd724576e4f64a32c23fda9"><div class="ttname"><a href="classUtil_1_1MpiStructBuilder.html#a3a65505e0cd724576e4f64a32c23fda9">Util::MpiStructBuilder::MpiStructBuilder</a></div><div class="ttdeci">MpiStructBuilder()</div><div class="ttdoc">Default constructor.</div><div class="ttdef"><b>Definition:</b> <a href="MpiStructBuilder_8cpp_source.html#l00010">MpiStructBuilder.cpp:10</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 6 2024 21:57:46 for PSCF+ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
