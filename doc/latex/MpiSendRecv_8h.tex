\hypertarget{MpiSendRecv_8h}{}\doxysubsection{Mpi\+Send\+Recv.\+h File Reference}
\label{MpiSendRecv_8h}\index{MpiSendRecv.h@{MpiSendRecv.h}}
{\ttfamily \#include $<$util/global.\+h$>$}\newline
{\ttfamily \#include $<$util/mpi/\+Mpi\+Traits.\+h$>$}\newline
{\ttfamily \#include $<$util/containers/\+D\+Array.\+h$>$}\newline
{\ttfamily \#include $<$util/containers/\+D\+Matrix.\+h$>$}\newline
\doxysubsubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
 \mbox{\hyperlink{namespaceUtil}{Util}}
\begin{DoxyCompactList}\small\item\em Utility classes for scientific computation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_a256b47167538c90b512abdb5a5cc562d}{Util\+::send}} (M\+P\+I\+::\+Comm \&comm, T \&data, int dest, int tag)
\begin{DoxyCompactList}\small\item\em Send a single T value. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_ac5da0397a02bafb86b9d53c403062f42}{Util\+::recv}} (M\+P\+I\+::\+Comm \&comm, T \&data, int source, int tag)
\begin{DoxyCompactList}\small\item\em Receive a single T value. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_abfd28295c1ca99087a002f5fedb5c526}{Util\+::bcast}} (M\+P\+I\+::\+Intracomm \&comm, T \&data, int root)
\begin{DoxyCompactList}\small\item\em Broadcast a single T value. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_a4784bbd7a1689cdf3baa93d157f7ccdc}{Util\+::send}} (M\+P\+I\+::\+Comm \&comm, T $\ast$array, int count, int dest, int tag)
\begin{DoxyCompactList}\small\item\em Send a C-\/array of T values. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_ad19e2cf503c1b63484c9ae092382df99}{Util\+::recv}} (M\+P\+I\+::\+Comm \&comm, T $\ast$array, int count, int source, int tag)
\begin{DoxyCompactList}\small\item\em Receive a C-\/array of T objects. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_ad19da3b7fe8ce666e04c02fa8914fb5e}{Util\+::bcast}} (M\+P\+I\+::\+Intracomm \&comm, T $\ast$array, int count, int root)
\begin{DoxyCompactList}\small\item\em Broadcast a C-\/array of T objects. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_a0deddd28b3c47d4f134c7427171f7864}{Util\+::send}} (M\+P\+I\+::\+Comm \&comm, D\+Array$<$ T $>$ \&array, int count, int dest, int tag)
\begin{DoxyCompactList}\small\item\em Send a D\+Array$<$\+T$>$ container. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_a1bde7479caa958846c97e4cc4e12f9fc}{Util\+::recv}} (M\+P\+I\+::\+Comm \&comm, D\+Array$<$ T $>$ \&array, int count, int source, int tag)
\begin{DoxyCompactList}\small\item\em Receive a D\+Array$<$\+T$>$ container. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_a803a35549d11f824fb6398a9ba611a66}{Util\+::bcast}} (M\+P\+I\+::\+Intracomm \&comm, D\+Array$<$ T $>$ \&array, int count, int root)
\begin{DoxyCompactList}\small\item\em Broadcast a D\+Array$<$\+T$>$ container. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_aec66ff165d24e1c1db70d2d21a84c6b8}{Util\+::send}} (M\+P\+I\+::\+Comm \&comm, D\+Matrix$<$ T $>$ \&matrix, int m, int n, int dest, int tag)
\begin{DoxyCompactList}\small\item\em Send a D\+Matrix$<$\+T$>$ container. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_a03ab9d8d4adf38632647e841db76a4f8}{Util\+::recv}} (M\+P\+I\+::\+Comm \&comm, D\+Matrix$<$ T $>$ \&matrix, int m, int n, int source, int tag)
\begin{DoxyCompactList}\small\item\em Receive a D\+Matrix$<$\+T$>$ container. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{namespaceUtil_a582d7d41457fcd3badb29316253f9b9c}{Util\+::bcast}} (M\+P\+I\+::\+Intracomm \&comm, D\+Matrix$<$ T $>$ \&matrix, int m, int n, int root)
\begin{DoxyCompactList}\small\item\em Broadcast a D\+Matrix$<$\+T$>$ container. \end{DoxyCompactList}\item 
template$<$$>$ void \mbox{\hyperlink{namespaceUtil_a5d61a39bc314fa7c9f2d6c3656a4791a}{Util\+::send$<$ bool $>$}} (M\+P\+I\+::\+Comm \&comm, bool \&data, int dest, int tag)
\begin{DoxyCompactList}\small\item\em Explicit specialization of send for bool data. \end{DoxyCompactList}\item 
template$<$$>$ void \mbox{\hyperlink{namespaceUtil_a9ccd68b4d89ff818829b4021976ad83a}{Util\+::recv$<$ bool $>$}} (M\+P\+I\+::\+Comm \&comm, bool \&data, int source, int tag)
\begin{DoxyCompactList}\small\item\em Explicit specialization of recv for bool data. \end{DoxyCompactList}\item 
template$<$$>$ void \mbox{\hyperlink{namespaceUtil_ac338ed91940648cfb7485e336709bb33}{Util\+::bcast$<$ bool $>$}} (M\+P\+I\+::\+Intracomm \&comm, bool \&data, int root)
\begin{DoxyCompactList}\small\item\em Explicit specialization of bcast for bool data. \end{DoxyCompactList}\item 
template$<$$>$ void \mbox{\hyperlink{namespaceUtil_ac8c1730e0049d03692fa3987eace32e0}{Util\+::send$<$ std\+::string $>$}} (M\+P\+I\+::\+Comm \&comm, std\+::string \&data, int dest, int tag)
\begin{DoxyCompactList}\small\item\em Explicit specialization of send for std\+::string data. \end{DoxyCompactList}\item 
template$<$$>$ void \mbox{\hyperlink{namespaceUtil_a4f41ec3e79fb6239d373593525a39ec6}{Util\+::recv$<$ std\+::string $>$}} (M\+P\+I\+::\+Comm \&comm, std\+::string \&data, int source, int tag)
\begin{DoxyCompactList}\small\item\em Explicit specialization of recv for std\+::string data. \end{DoxyCompactList}\item 
template$<$$>$ void \mbox{\hyperlink{namespaceUtil_aae91f9a729a65246d891fe0b0b5bd41a}{Util\+::bcast$<$ std\+::string $>$}} (M\+P\+I\+::\+Intracomm \&comm, std\+::string \&data, int root)
\begin{DoxyCompactList}\small\item\em Explicit specialization of bcast for std\+::string data. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsubsection{Detailed Description}
This file contains templates for global functions send$<$\+T$>$, recv$<$\+T$>$ and bcast$<$\+T$>$. These are wrappers for the M\+PI send, recv (receive), and bcast (broadcast) functions. Overloaded forms of these functions are provided to transmit single values and arrays. The main difference between the wrappers and the underlying M\+PI functions is that the wrapper functions do not require an M\+PI type handle as a parameter. Instead, the M\+PI type associated with C++ type T (the template parameter) is inferred by the function implementations, by methods that are described below. The most important advantage of this is that it allows the wrapper functions to be used within other templates that take type T as a template parameter. The corresponding M\+PI methods cannot be used in generic templates because they require M\+PI type handle parameters that have different values for different date types.

The implementation of the templates send$<$\+T$>$, recv$<$\+T$>$, bcast$<$\+T$>$ for single values of type T rely on the existence of an associated explicit specialization of the class template Mpi\+Traits$<$typename T$>$. If it exists, the class Mpi\+Traits$<$\+T$>$ maps C++ type T onto an associated M\+PI type. Each specialization Mpi\+Traits$<$\+T$>$ has a static member Mpi\+Traits$<$\+T$>$\+::type that contains an opaque handle for the M\+PI type associated with C++ type T. Explicit specializations for the most common built-\/in C++ types are defined in \mbox{\hyperlink{MpiTraits_8h_source}{Mpi\+Traits.\+h}}.

The send$<$\+T$>$, recv$<$\+T$>$, and bcast$<$\+T$>$ templates can also be used to transmit instances of a user defined class T if an appropriate M\+PI type exists. To make this work, the user must define and commit an associated user-\/defined M\+PI data type, and also define an explicit specialization Mpi\+Traits$<$\+T$>$ to associate this M\+PI type with C++ type T. Specialized M\+PI data types and Mpi\+Traits classes for \mbox{\hyperlink{classUtil_1_1Vector}{Util\+::\+Vector}} and \mbox{\hyperlink{classUtil_1_1Vector}{Util\+::\+Vector}} are defined in the header and implementation files for these classes. User defined M\+PI types must be committed before they can be used.

Explicit specializations of send$<$\+T$>$, recv$<$\+T$>$ and bcast$<$\+T$>$ may also be provided for some types for which the algorithm based on Mpi\+Traits is awkward or unworkable. Explicit specializations are declared in this file for bool and std\+::string. The implementations of send$<$\+T$>$ recv$<$\+T$>$, and bcast$<$\+T$>$ for T=bool transmit boolean values as integers. The implementations for T = std\+::string transmit strings as character arrays. No Mpi\+Traits classes are needed or provided for bool or std\+::string, because the compiler will always use these explicit specializations, which do not rely on Mpi\+Traits classes, rather than the main function templates. It may also be more convenient for some user-\/defined classes to provide explicit specializations of these three functions, rather than defining an associated M\+PI type and Mpi\+Traits specialization. The templates defined here can be used to transmit instances of type T either if\+: (i) Explicit specializations are defined for these three functions, or (ii) an associated Mpi\+Traits class and M\+PI data type are defined.

Overloaded forms of send$<$\+T$>$, recv$<$\+T$>$, and bcast$<$\+T$>$ are provided to transmit 1D and 2D C arrays of data and D\+Array$<$\+T$>$ and D\+Matrix$<$\+T$>$ containers. These functions send the data in one transmission, as a contiguous buffer, if an M\+PI type is available, but send each element in a separate transmission if no Mpi\+Type exists but an explicit specialization exists for the required scalar form of send, recv, or bcast. 