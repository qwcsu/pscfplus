\hypertarget{group__Pspg__ThreadGrid__Module}{}\doxysubsection{Thread\+Grid}
\label{group__Pspg__ThreadGrid__Module}\index{ThreadGrid@{ThreadGrid}}


Management of G\+PU resources and setting of execution configurations.  


\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_gaf4f6c930f2bf4eeee3a58db08b8f5c62}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::init}} ()
\begin{DoxyCompactList}\small\item\em Initialize static variables in \mbox{\hyperlink{namespacePscf_1_1Pspg_1_1ThreadGrid}{Pspg\+::\+Thread\+Grid}} namespace. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga88540549636a9bad54488e5bda8994a8}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Per\+Block}} ()
\begin{DoxyCompactList}\small\item\em Set the number of threads per block to a default value. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga4d708f93e2d5f8383add643ebbb74748}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Per\+Block}} (int n\+Threads\+Per\+Block)
\begin{DoxyCompactList}\small\item\em Set the number of threads per block to a specified value. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_gad6911caa321f3e76bc02c85d64bef180}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical}} (int \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga1b636b677c22ec4892bf849a12ba80fe}{n\+Threads\+Logical}})
\begin{DoxyCompactList}\small\item\em Set the total number of threads required for execution. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_gab9bc479acd855a968f0d9677f8a7f6aa}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical}} (int \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga1b636b677c22ec4892bf849a12ba80fe}{n\+Threads\+Logical}}, int \&\mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga473773a88ab0efdfd748e26c0b45ece0}{n\+Blocks}})
\begin{DoxyCompactList}\small\item\em Set the total number of threads required for execution. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga42d9985c119919cb2ee88159c25ded56}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical}} (int \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga1b636b677c22ec4892bf849a12ba80fe}{n\+Threads\+Logical}}, int \&\mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga473773a88ab0efdfd748e26c0b45ece0}{n\+Blocks}}, int \&\mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga2dbe33b275f99c1acfac425b4c9bf948}{n\+Threads}})
\begin{DoxyCompactList}\small\item\em Set the total number of threads required for execution. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_gac1910a1e9be5d7c66b32c024e3a3a8b6}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::check\+Execution\+Config}} ()
\begin{DoxyCompactList}\small\item\em Check the execution configuration (threads and block counts). \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga473773a88ab0efdfd748e26c0b45ece0}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Blocks}} ()
\begin{DoxyCompactList}\small\item\em Get the current number of blocks for execution. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga2dbe33b275f99c1acfac425b4c9bf948}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Threads}} ()
\begin{DoxyCompactList}\small\item\em Get the number of threads per block for execution. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga1b636b677c22ec4892bf849a12ba80fe}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Threads\+Logical}} ()
\begin{DoxyCompactList}\small\item\em Return previously requested total number of threads. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{group__Pspg__ThreadGrid__Module_ga19b4bcac92a5a590bbc1166599cb4e4b}{Pscf\+::\+Pspg\+::\+Thread\+Grid\+::has\+Unused\+Threads}} ()
\begin{DoxyCompactList}\small\item\em Indicates whether there will be unused threads. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsubsection{Detailed Description}
Management of G\+PU resources and setting of execution configurations. 



\doxysubsubsection{Function Documentation}
\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_gaf4f6c930f2bf4eeee3a58db08b8f5c62}\label{group__Pspg__ThreadGrid__Module_gaf4f6c930f2bf4eeee3a58db08b8f5c62}} 
\index{ThreadGrid@{ThreadGrid}!init@{init}}
\index{init@{init}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily void Pscf\+::\+Pspg\+::\+Thread\+Grid\+::init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initialize static variables in \mbox{\hyperlink{namespacePscf_1_1Pspg_1_1ThreadGrid}{Pspg\+::\+Thread\+Grid}} namespace. 



Definition at line 35 of file Thread\+Grid.\+cu.



References Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Per\+Block(), and U\+T\+I\+L\+\_\+\+T\+H\+R\+OW.



Referenced by Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical(), and Pscf\+::\+Pspg\+::\+Continuous\+::\+System$<$ D $>$\+::\+System().

\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_ga88540549636a9bad54488e5bda8994a8}\label{group__Pspg__ThreadGrid__Module_ga88540549636a9bad54488e5bda8994a8}} 
\index{ThreadGrid@{ThreadGrid}!setThreadsPerBlock@{setThreadsPerBlock}}
\index{setThreadsPerBlock@{setThreadsPerBlock}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{setThreadsPerBlock()}{setThreadsPerBlock()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Per\+Block (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Set the number of threads per block to a default value. 

Query the hardware to determine a reasonable number. 

Definition at line 48 of file Thread\+Grid.\+cu.



Referenced by Pscf\+::\+Pspg\+::\+Thread\+Grid\+::init(), and Pscf\+::\+Pspg\+::\+Continuous\+::\+System$<$ D $>$\+::set\+Options().

\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_ga4d708f93e2d5f8383add643ebbb74748}\label{group__Pspg__ThreadGrid__Module_ga4d708f93e2d5f8383add643ebbb74748}} 
\index{ThreadGrid@{ThreadGrid}!setThreadsPerBlock@{setThreadsPerBlock}}
\index{setThreadsPerBlock@{setThreadsPerBlock}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{setThreadsPerBlock()}{setThreadsPerBlock()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Per\+Block (\begin{DoxyParamCaption}\item[{int}]{n\+Threads\+Per\+Block }\end{DoxyParamCaption})}



Set the number of threads per block to a specified value. 


\begin{DoxyParams}{Parameters}
{\em n\+Threads\+Per\+Block} & the number of threads per block (input) \\
\hline
\end{DoxyParams}


Definition at line 72 of file Thread\+Grid.\+cu.



References Pscf\+::\+Pspg\+::\+Thread\+Grid\+::check\+Execution\+Config().

\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_gad6911caa321f3e76bc02c85d64bef180}\label{group__Pspg__ThreadGrid__Module_gad6911caa321f3e76bc02c85d64bef180}} 
\index{ThreadGrid@{ThreadGrid}!setThreadsLogical@{setThreadsLogical}}
\index{setThreadsLogical@{setThreadsLogical}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{setThreadsLogical()}{setThreadsLogical()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical (\begin{DoxyParamCaption}\item[{int}]{n\+Threads\+Logical }\end{DoxyParamCaption})}



Set the total number of threads required for execution. 

Calculate the number of blocks, and calculate threads per block if necessary. Updates static variables.


\begin{DoxyParams}{Parameters}
{\em n\+Threads\+Logical} & total number of required threads (input) \\
\hline
\end{DoxyParams}


Definition at line 80 of file Thread\+Grid.\+cu.



References Pscf\+::\+Pspg\+::\+Thread\+Grid\+::init(), Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Threads\+Logical(), and U\+T\+I\+L\+\_\+\+A\+S\+S\+E\+RT.



Referenced by Pscf\+::\+Pspg\+::\+Continuous\+::\+Am\+Iterator$<$ D $>$\+::allocate(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Propagator$<$ D $>$\+::allocate(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Am\+Iterator$<$ D $>$\+::build\+Omega(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Mixture$<$ D $>$\+::compute(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Am\+Iterator$<$ D $>$\+::compute\+Deviation(), Pscf\+::\+Pspg\+::\+Continuous\+::\+System$<$ D $>$\+::compute\+Free\+Energy(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Propagator$<$ D $>$\+::compute\+Head(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Block$<$ D $>$\+::compute\+Int(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Mixture$<$ D $>$\+::compute\+Stress(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Polymer$<$ D $>$\+::compute\+Vertex(), Pscf\+::\+Pspg\+::\+F\+F\+T$<$ D $>$\+::forward\+Transform(), Pscf\+::\+Pspg\+::\+F\+F\+T\+Batched$<$ D $>$\+::forward\+Transform(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Propagator$<$ D $>$\+::int\+Q(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Am\+Iterator$<$ D $>$\+::minimize\+Coeff(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Block$<$ D $>$\+::set\+Discretization(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Mixture$<$ D $>$\+::set\+Mesh(), Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Block$<$ D $>$\+::setup\+Solver(), Pscf\+::\+Polymer\+Tmpl$<$ Block$<$ D $>$ $>$\+::solve(), Pscf\+::\+Pspg\+::\+Continuous\+::\+Propagator$<$ D $>$\+::solve\+Backward(), and Pscf\+::\+Pspg\+::\+Continuous\+::\+Block$<$ D $>$\+::step().

\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_gab9bc479acd855a968f0d9677f8a7f6aa}\label{group__Pspg__ThreadGrid__Module_gab9bc479acd855a968f0d9677f8a7f6aa}} 
\index{ThreadGrid@{ThreadGrid}!setThreadsLogical@{setThreadsLogical}}
\index{setThreadsLogical@{setThreadsLogical}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{setThreadsLogical()}{setThreadsLogical()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily void Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical (\begin{DoxyParamCaption}\item[{int}]{n\+Threads\+Logical,  }\item[{int \&}]{n\+Blocks }\end{DoxyParamCaption})}



Set the total number of threads required for execution. 

Recalculate the number of blocks, and calculate threads per block if necessary. Also updates the n\+Blocks output parameter.


\begin{DoxyParams}{Parameters}
{\em n\+Threads\+Logical} & total number of required threads (input) \\
\hline
{\em n\+Blocks} & updated number of blocks (output) \\
\hline
\end{DoxyParams}


Definition at line 108 of file Thread\+Grid.\+cu.



References Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Blocks(), Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Threads\+Logical(), and Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical().

\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_ga42d9985c119919cb2ee88159c25ded56}\label{group__Pspg__ThreadGrid__Module_ga42d9985c119919cb2ee88159c25ded56}} 
\index{ThreadGrid@{ThreadGrid}!setThreadsLogical@{setThreadsLogical}}
\index{setThreadsLogical@{setThreadsLogical}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{setThreadsLogical()}{setThreadsLogical()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily void Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical (\begin{DoxyParamCaption}\item[{int}]{n\+Threads\+Logical,  }\item[{int \&}]{n\+Blocks,  }\item[{int \&}]{n\+Threads }\end{DoxyParamCaption})}



Set the total number of threads required for execution. 

Computes and sets the number of blocks, and sets threads per block if necessary. Updates values of n\+Blocks and n\+Threads parameters in output parameters that are passed by value.


\begin{DoxyParams}{Parameters}
{\em n\+Threads\+Logical} & total number of required threads (input) \\
\hline
{\em n\+Blocks} & updated number of blocks (output) \\
\hline
{\em n\+Threads} & updated number threads per block (output) \\
\hline
\end{DoxyParams}


Definition at line 116 of file Thread\+Grid.\+cu.



References Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Blocks(), Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Threads(), Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Threads\+Logical(), and Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical().

\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_gac1910a1e9be5d7c66b32c024e3a3a8b6}\label{group__Pspg__ThreadGrid__Module_gac1910a1e9be5d7c66b32c024e3a3a8b6}} 
\index{ThreadGrid@{ThreadGrid}!checkExecutionConfig@{checkExecutionConfig}}
\index{checkExecutionConfig@{checkExecutionConfig}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{checkExecutionConfig()}{checkExecutionConfig()}}
{\footnotesize\ttfamily void Pscf\+::\+Pspg\+::\+Thread\+Grid\+::check\+Execution\+Config (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Check the execution configuration (threads and block counts). 

Check for validity and optimality, based on hardware warp size and streaming multiprocessor constraints. 

Definition at line 124 of file Thread\+Grid.\+cu.



References U\+T\+I\+L\+\_\+\+T\+H\+R\+OW.



Referenced by Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Per\+Block().

\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_ga473773a88ab0efdfd748e26c0b45ece0}\label{group__Pspg__ThreadGrid__Module_ga473773a88ab0efdfd748e26c0b45ece0}} 
\index{ThreadGrid@{ThreadGrid}!nBlocks@{nBlocks}}
\index{nBlocks@{nBlocks}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{nBlocks()}{nBlocks()}}
{\footnotesize\ttfamily int Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Blocks (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get the current number of blocks for execution. 



Definition at line 170 of file Thread\+Grid.\+cu.



Referenced by Pscf\+::\+Pspg\+::\+Continuous\+::\+Propagator$<$ D $>$\+::allocate(), Pscf\+::\+Pspg\+::\+Continuous\+::\+System$<$ D $>$\+::compute\+Free\+Energy(), and Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical().

\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_ga2dbe33b275f99c1acfac425b4c9bf948}\label{group__Pspg__ThreadGrid__Module_ga2dbe33b275f99c1acfac425b4c9bf948}} 
\index{ThreadGrid@{ThreadGrid}!nThreads@{nThreads}}
\index{nThreads@{nThreads}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{nThreads()}{nThreads()}}
{\footnotesize\ttfamily int Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Threads (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get the number of threads per block for execution. 



Definition at line 173 of file Thread\+Grid.\+cu.



Referenced by Pscf\+::\+Pspg\+::\+Continuous\+::\+System$<$ D $>$\+::compute\+Free\+Energy(), and Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical().

\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_ga1b636b677c22ec4892bf849a12ba80fe}\label{group__Pspg__ThreadGrid__Module_ga1b636b677c22ec4892bf849a12ba80fe}} 
\index{ThreadGrid@{ThreadGrid}!nThreadsLogical@{nThreadsLogical}}
\index{nThreadsLogical@{nThreadsLogical}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{nThreadsLogical()}{nThreadsLogical()}}
{\footnotesize\ttfamily int Pscf\+::\+Pspg\+::\+Thread\+Grid\+::n\+Threads\+Logical (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Return previously requested total number of threads. 



Definition at line 176 of file Thread\+Grid.\+cu.



Referenced by Pscf\+::\+Pspg\+::\+Thread\+Grid\+::set\+Threads\+Logical().

\mbox{\Hypertarget{group__Pspg__ThreadGrid__Module_ga19b4bcac92a5a590bbc1166599cb4e4b}\label{group__Pspg__ThreadGrid__Module_ga19b4bcac92a5a590bbc1166599cb4e4b}} 
\index{ThreadGrid@{ThreadGrid}!hasUnusedThreads@{hasUnusedThreads}}
\index{hasUnusedThreads@{hasUnusedThreads}!ThreadGrid@{ThreadGrid}}
\doxyparagraph{\texorpdfstring{hasUnusedThreads()}{hasUnusedThreads()}}
{\footnotesize\ttfamily bool Pscf\+::\+Pspg\+::\+Thread\+Grid\+::has\+Unused\+Threads (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Indicates whether there will be unused threads. 

Returns true iff n\+Threads$\ast$n\+Blocks != n\+Threads\+Logical. 

Definition at line 179 of file Thread\+Grid.\+cu.

